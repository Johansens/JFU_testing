scripted_gui = {
	###THIS BLOCK HAS THE HFU/LW FUEL SYSTEM, TALK TO LENNARD ABOUT THIS AS HE MADE IT###
	fuel_tool_topbar_win = { 
		context_type = player_context

		window_name = "fuel_tool_topbar_win"
		parent_window_token = logistics_tab
		visible = {
			has_country_flag=fuel_system_enabled
			
		}

		effects = {
			fuel_value_button_click = {
				# Coring List Window
				
				if = {
					limit = {
						always=yes
					}
					if = {
						limit = {
							has_variable = show_fuel_system_window
						}
						clear_variable = show_fuel_system_window
					}
					else = {
						set_variable = { show_fuel_system_window = 1 }
					}
				}

			}
		}

		triggers = {
			fuel_value_button_click_enabled = {
				has_country_flag=fuel_system_enabled
			}
			fuel_value_button_visible = {
				has_country_flag=fuel_system_enabled
			}
		}
	}

	fuel_system_window = {
		context_type = player_context
		parent_window_token = logistics_tab
		window_name = "fuel_system_window"

		visible = {
			check_variable = { show_fuel_system_window > 0 }
		}

		effects = {
			horsttool_helpbutton2_click = {		ROOT = { country_event = { id =  horsthelp.1 } }	     }
			refresh_button_click =  {
				fuel_system_refresh_list = yes
			}
			close_button_click = {
				clear_variable = show_fuel_system_window
			}
		
			increase_fuel_priority_click = {
				for_each_loop = {
				array = ROOT.faction_members_array
				if={limit={var:v={tag=PREV}} #ERROR
				set_temp_variable={new_index = i}
				add_to_temp_variable={new_index=-1}
				if={limit={check_variable={new_index >-1}}
				remove_from_array = {
				array = ROOT.faction_members_array
				value = THIS
				}
				add_to_array={
				array = ROOT.faction_members_array
				value = THIS
				index=new_index
				}
				}
				set_temp_variable={break=1}
			}
			}}
			decrease_fuel_priority_click = {
				for_each_loop = {
				array = ROOT.faction_members_array
				if={limit={var:v={tag=PREV}} #ERROR
				set_temp_variable={new_index = i}
				add_to_temp_variable={new_index=1}
				if={limit={check_variable={new_index <ROOT.faction_members_array^num}}
				remove_from_array = {
				array = ROOT.faction_members_array
				value = THIS
				}
				add_to_array={
				array = ROOT.faction_members_array
				value = THIS
				index=new_index
				}
				}
				set_temp_variable={break=1}
			}
			}}
			decrease_fuel_priority_shift_click = {
			remove_from_array = {
				array = ROOT.faction_members_array
				value = THIS
				}
				add_to_array={
				array = ROOT.faction_members_array
				value = THIS
				}
			}
			increase_fuel_priority_shift_click = {
			remove_from_array = {
				array = ROOT.faction_members_array
				value = THIS
				}
				add_to_array={
				array = ROOT.faction_members_array
				value = THIS
				index=0
				}
			}
			increase_min_fuel_button_click={
			add_to_variable={min_fuel=0.05}
			clamp_variable={
			var=min_fuel
			min=0.05
			max=1
			}
			}
			decrease_min_fuel_button_click={
			add_to_variable={min_fuel=-0.05}
			clamp_variable={
			var=min_fuel
			min=0.05
			max=1
			}
			}
			increase_min_fuel_button_shift_click={
			add_to_variable={min_fuel=0.1}
			clamp_variable={
			var=min_fuel
			min=0.05
			max=1
			}
			}
			decrease_min_fuel_button_shift_click={
			add_to_variable={min_fuel=-0.1}
			clamp_variable={
			var=min_fuel
			min=0.05
			max=1
			}
			}
			enable_send_fuel_root_click = {
				if={limit={check_variable={send_fuel_enabled >0}}
				clear_variable=send_fuel_enabled
				for_each_scope_loop={
				array=ROOT.faction_members_array
				clear_variable=send_fuel_enabled}}
				else={ 
				set_variable={send_fuel_enabled=2}
				for_each_scope_loop={
				array=ROOT.faction_members_array
				set_variable={send_fuel_enabled=2}}
			}
			}
			enable_send_fuel_click = {
				if={limit={check_variable={send_fuel_enabled >0}}
				clear_variable=send_fuel_enabled
				else={set_variable={send_fuel_enabled=2}}
			}
			}
			
		}

		triggers = {
			no_faction_members_info_visible = {
				check_variable = { ROOT.faction_members_array^num < 1 }
			}


		}
		properties = {
			fuel_bar = {

				x = fuel_bar_fuel
			}
			enable_send_fuel={
				frame = send_fuel_enabled
			}
			enable_send_fuel_root={
				frame = send_fuel_enabled
			}


		}

		dynamic_lists = {
			fuel_faction_members_gridbox = {
				array = faction_members_array
				entry_container = fuel_faction_members_entry
				change_scope = yes
			}
		}
	}
	topbar_resource_toogle_window = {
		context_type = player_context

		window_name = "topbar_resource_toogle_window"
		parent_window_token = trade_tab
		#visible = {
			#	has_country_flag=fuel_system_enabled
			#
			#}

		effects = {
			toogle_button_click={
				if={limit={check_variable={resources_disabled=0}}
					set_variable={resources_disabled=1}}
				else={clear_variable=resources_disabled}
			}
		}
		


	}
	
	topbar_resources= {
		context_type = player_context
		window_name = "topbar_resource_container"
		visible = {
			check_variable={resources_disabled=0}
		}
		

		triggers = {

		}
	}

}
