add_namespace = mtg_britain 


### END ABDICATION CRISIS ###

# Guide the Colonies notification event
country_event = {
	id = mtg_britain.17
	title = mtg_britain.17.t
	desc = mtg_britain.17.d
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.17.a
		if = {
			limit = {
				tag = CAN
			}
			effect_tooltip = {
				add_stability = 0.05
				add_opinion_modifier = { target = ENG modifier = ENG_guiding_the_colonies }
				add_ideas = ENG_guided_by_britain_1
			}
		}
		if = {
			limit = {
				tag = AST
			}
			effect_tooltip = {
				add_stability = 0.05
				add_opinion_modifier = { target = ENG modifier = ENG_guiding_the_colonies }
				add_ideas = ENG_guided_by_britain_1
			}
		}
		if = {
			limit = {
				tag = NZL
			}
			effect_tooltip = {
				add_stability = 0.05
				add_opinion_modifier = { target = ENG modifier = ENG_guiding_the_colonies }
				add_ideas = ENG_guided_by_britain_1
			}
		}
		if = {
			limit = {
				tag = SAF
			}
			effect_tooltip = {
				add_stability = 0.05
				add_opinion_modifier = { target = ENG modifier = ENG_guiding_the_colonies }
				add_ideas = ENG_guided_by_britain_1
			}
		}
	}
}

# Towards Dominion Independence notification event
country_event = {
	id = mtg_britain.18
	title = mtg_britain.18.t
	desc = mtg_britain.18.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.18.a
		if = {
			limit = {
				tag = CAN
			}
			effect_tooltip = {
				swap_ideas = {
					remove_idea = ENG_guided_by_britain_1
					add_idea = ENG_guided_by_britain_2
				}
			}
		}
		if = {
			limit = {
				tag = AST
			}
			effect_tooltip = {
				swap_ideas = {
					remove_idea = ENG_guided_by_britain_1
					add_idea = ENG_guided_by_britain_2
				}
			}
		}
		if = {
			limit = {
				tag = NZL
			}
			effect_tooltip = {
				swap_ideas = {
					remove_idea = ENG_guided_by_britain_1
					add_idea = ENG_guided_by_britain_2
				}
			}
		}
		if = {
			limit = {
				tag = SAF
			}
			effect_tooltip = {
				swap_ideas = {
					remove_idea = ENG_guided_by_britain_1
					add_idea = ENG_guided_by_britain_2
				}
			}
		}
	}
}

# Foundations for an Indian State notification event
country_event = {
	id = mtg_britain.19
	title = mtg_britain.19.t
	desc = mtg_britain.19.d
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.17.a
		effect_tooltip = {
			add_stability = 0.05
			add_opinion_modifier = { target = ENG modifier = ENG_guiding_the_colonies }
			add_ideas = ENG_guided_by_britain_raj_1
		}
	}
}

# Three-Nation Solution notification event
country_event = {
	id = mtg_britain.20
	title = mtg_britain.20.t
	desc = mtg_britain.20.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.20.a
		add_opinion_modifier = { target = ENG modifier = ENG_three_nation_solution }
		if = {
			limit = {
				has_idea = RAJ_marginalized_muslim_community_angry
			}
			swap_ideas = {
				add_idea = RAJ_marginalized_muslim_community_happy
				remove_idea = RAJ_marginalized_muslim_community_angry
			}
		}
		if = {
			limit = {
				has_idea = RAJ_marginalized_muslim_community
			}
			swap_ideas = {
				add_idea = RAJ_marginalized_muslim_community_happy
				remove_idea = RAJ_marginalized_muslim_community
			}
		}
	}
}

# Towards Indian Independence notification event
country_event = {
	id = mtg_britain.21
	title = mtg_britain.21.t
	desc = mtg_britain.18.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.18.a
		effect_tooltip = {
			swap_ideas = {
				remove_idea = ENG_guided_by_britain_RAJ_1
				add_idea = ENG_guided_by_britain_RAJ_2
			}
			if = {
				limit = {
					tag = RAJ
					NOT = { is_subject = no }
					NOT = { has_autonomy_state = autonomy_dominion }
					has_dlc = "Together for Victory"
				}
				set_autonomy = { target = RAJ autonomy_state = autonomy_dominion }
			}
			retire_country_leader = yes
		}
	}
}

# Event for target saying they are in violation of the Washington Naval Treaty and ENG wants them to scuttle some ships
country_event = {
	id = mtg_britain.106
	title = mtg_britain.106.t
	desc = mtg_britain.106.d
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.106.a
	}
}

# Event for ENG informing them that the target has scuttled some ships and is now compliant with the treaty
country_event = {
	id = mtg_britain.107
	title = mtg_britain.107.t
	desc = mtg_britain.107.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.107.a
	}
}

# Event for ENG saying target refused to get rid of ships and ENG now has a wargoal
country_event = {
	id = mtg_britain.108
	title = mtg_britain.108.t
	desc = mtg_britain.108.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.108.a
		create_wargoal = {
			target = FROM
			type = puppet_wargoal_focus
			expire = 0
		}
	}
}

####

country_event = {
	id = mtg_britain.999
	title = mtg_britain.999.t
	desc = mtg_britain.999.d
	picture = GFX_report_event_europe_funeral

	trigger = {
		tag = ENG
		has_country_flag = ENG_king_died
		has_dlc = "Man the Guns"
		has_country_flag = ENG_abdication_crisis_morganatic_marriage
		has_country_flag = edward_viii_married_wallis_simpson
		126 = {
			is_controlled_by = ENG
			days_since_last_strategic_bombing < 8
		}
	}
	
	fire_only_once = yes

	mean_time_to_happen = { days = 30 }
	
	option = { }
}

country_event = {
	id = mtg_britain.1000
	title = mtg_britain.1000.t
	desc = mtg_britain.1000.d
	picture = GFX_report_event_generic_funeral

	fire_only_once = yes
	
	trigger = {
		original_tag = ENG
		has_government = neutrality
		date > 1941.1.1
		has_country_leader = { ruling_only = yes name = "George VI" }
	}

	mean_time_to_happen = {
		days = 1460
	}
	
	option = {
		name = mtg_britain.1000.a
		kill_country_leader = yes
		create_country_leader = {
			name = "Elizabeth II"
			desc = "POLITICS_ELIZABETH_II_DESC"
			picture = "GFX_portrait_eng_elizabeth_ii"
			expire = "1965.1.1"
			ideology = despotism
			female = yes
			traits = {
				inexperienced_monarch headstrong popular_queen
			}
		}
		set_party_name = { ideology = neutrality long_name = ENG_neutrality_party_queens_party_long name = ENG_neutrality_party_queens_party }
		hidden_effect = { news_event = { id = mtg_news.59 days = 1 } }
	}
}